# 常见面试题

by 菲尼莫斯 2019年9月26日

---

## tcp和udp

**可靠性**

IP协议作为网络层协议，不保证可靠性以及按序送达，只保证定位、寻址和传送

UDP协议作为传输层协议，并没有改进IP协议，因此继承了不保证丢失、不保证有序的特点

TCP协议对IP协议的缺点进行改进，保证数据一定送达、有序送达、不重复

**连接**

TCP协议是面向连接的，通过三次握手保证了连接的可靠

UDP协议是无连接的，发送方不需预告知接受方，也不会确认消息是否收到，也不会重新发送

因此TCP的启动更慢，而UDP的实时性更好、

UDP协议可以在应用层来保证数据传输的可靠性

**数据**

UDP是基于数据报的传输，一个一个数据报的发，应用层交给UDP多长的报文，UDP就照样发送，既不合并也不拆分

TCP是基于字节流的传输，协议内部有缓存，能够对数据进行合并和拆分，按顺序后均匀发送。

* TCP能够根据网络的拥塞情况自动调整发送策略（滑动窗口、慢开始、拥塞避免、快重传、快恢复），而UDP则不行

## http和https

* http以明文传递消息，https以对称加密的形式加密传输内容

* http是纯应用层协议，https分为传输层的sll协议和应用层的http协议

* http协议不确认服务方的身份，https的服务方需要申请CA证书，证书可以绑定IP或者域名，但一个域名只能绑定一个IP。证书机制通过非对称加密的方式确认了服务方的身份。

* http使用的是80端口，而https使用的是443端口

* http协议是无状态，无连接的，即发送和接受互相独立，http协议的双方不会长久维持对方的信息，但可以通过浏览器等http代理层面和服务端维护长久可复用的tcp连接。https的ssl以及tcp层毫无疑问是需要长久连接的。

**https的链接过程：**

1. 客户端发送请求

2. 服务端响应证书及其证书非对称加密**公钥P**

3. 客户端检查和验证服务端的证书是否合法

4. 若检查通过，则生成一串对称加密**密钥K**，并使用服务端的**公钥P**加密后发送给服务端

5. 此时https链接建立，此后的通信中双方都将使用**密钥K**对内容进行加密

## Get和Post的终极区别

* GET 请求可被缓存
* GET 请求保留在浏览器历史记录中
* GET 请求可被收藏为书签
* GET 请求的数据对外可见
* GET 请求有长度限制
* GET 请求的编码类型有限，不能传文件

## http2.0

**http1.1**

> 继承了http1.0的特点,同时改善了http的一些问题,首先是长连接,http1.1新增加了connecion字段,里面可以设置keey-Alive(保持连接)或者close(关闭长连接),避免了每次请求都会新建连接,提高了网络的利用率
> http1.1还增加了Host字段,用来明确表示浏览器要服务器上的哪一个WEB站点,这才实现了在一台WEB服务器上可以在同一个IP地址和端口号上使用不同的主机名来创建多个虚拟WEB站点,同时还支持了断点续传
> http1.1的管道:可以发送很多请求到服务端,但是服务端必须要按顺序返回响应,由此可以看出http1.1的管道只是把客户端的请求序列变成了服务端的响应序列,还是有问题,很多浏览器并不是很支持
> http1.1还增加了缓存,断点续传

**http2.0**

HTTP1.0 中每一条请求需要建立一个TCP链接，即便请求的资源非常小，建立链接将花费大量的时间。

HTTP1.1 中每一条TCP链接可以复用发送一组有序的HTTP消息，服务端必须按发送顺序响应

在HTTP2中实现了真正的TCP链接的多路复用，即只需建立一条TCP链接能够承载任意数量的双向数据流，从而能够传递所有的资源，包括html、js和CSS等，所有请求和响应可以是乱序的。（TCP链接有个慢启动的特性，每次发送的数据量x2直到达到峰值）

HTTP1.1中，任何资源都是由客户端需要时主动向服务端发起请求从而获得资源，但很多时候服务端能事先知道客户端所需的资源，如果每个资源都有客户端发起请求则会占用大量的时间。在HTTP2中增加了服务端推送功能，服务端实现解析一个html页面，包括其中的所需的js和css一次性按顺序都发给客户端。

客户端能够和服务端进行约定，将请求和响应的头部以特定的方式编码，从而达到压缩请求头的目的。