---
title: vim基础
author: 菲尼莫斯
date: 2018-10-31
tags:
- vim
categories:
- utils
---

# vim基础

by 菲尼莫斯 2018年10月31日

---

## 最常用的命令

**在普通模式下：**

* k、j、h、l 上下左右移动(v模式也可使用)

* 大写J可以删除该行与下一行之间的空格，将下一行合到该行

* o 另起一行书写（o下一行，O上一行）

* p 粘贴(粘贴在光标位置之后）

    **使用`:reg`可以查看寄存器中的内容，使用 `"寄存器p` 来粘贴特定的寄存器**

* u 撤销，使用**ctrl+R反撤销**

* i 进入i模式，在当前位置书写

* A 在行最末书写(a在光标后书写)

* v 进入v模式，可以从当前位置批量选择数据

* x 删除单个字符(v模式也可使用)

* r 替换单个字符(v模式也可使用)

* s 删除并进入插入模式，是r命令的升级版(v模式也可使用)

* y 复制(需配合范围指令，但可在v模式直接使用)

* :w  保存

* :q  退出

## 导航命令

**以下命令可在v模式和普通模式下使用:**

* f 字母 导航到下一个字母（F字母 导航到上一个字母)

* w 导航至下一个单词的词头

* e 导航至下一个单词的词尾

* b 导航至上一个单词的词头

* % 在括号两端移动

* $ 跳到行末（在i模式下使用end键切换到行末）

* ^ 跳到行首缩进处

* 0 跳到行首(第0列）

* ctrl + b (back)上一页, ctrl + f (forward)下一页

* ctrl +u (up)上半页，ctrl + d (down)下半页

* 数字 + G 跳到指定行

* G 跳到最后一行

* gg 跳到第一行

## 一些操作命令

**以下命令在普通模式下使用**

### 剪切：

* dw或de 剪切一个单词（dw剪切到下个单词头，de剪切到本单词尾）

* d$ 剪切到行末

* d0 剪切到行首

* d^ 剪切到缩进处

* dd 表示剪切一整行

* daw 删除当前单词

* di 删除引号内的字符

* df + 指定字符 删除到指定字符

### 复制

**使用y作为命令头，后接同d操作同样的表示范围的字符**

* yy 表示复制一整行

* `"+y` 表示将内容复制到系统剪切板（需要安装vim-gnome）

* 使用 `"寄存器y` 来复制到特定的寄存器

* 使用 `:n,m copy x` 将第n到m行复制到x行

### 替换：

**使用c作为命令头，后接同d操作同样的表示范围的字符，是s命令的升级版**

cc 表示替换一整行

### 切换

**g命令代表go，可以进行一些特殊的操作，其功能需要深入学习**

以下是常用例子

* gt 切换下一个vim tab(类似于浏览器标签栏保存多个页面)

* Gt 切换上一个vim tab

* gv 回溯之前v模式的选中

* gg 回到第一行

* g\* 查找当前单词及包含当前单词的词或词组

## 搜索

**搜索功能的使用有多种方式和技巧，需要深入学习和了解**

以下是基础使用方式：

1. 在普通模式下使用 `/` 或 `?` 进入搜索模式(区别在于/表示从头开始搜索，?表示从结尾开始搜索)

2. 输入想要搜索的字符或是正则表达式后键入enter后出现搜索结果

3. 运用n切换下一个搜索值，N切换上一个搜索值

4. :set hls 可以高亮显示所有结果(:set noh 取消效果)

5. :set ic 可以匹配大小写(:set noic取消)


进阶操作：

* 在光标位置使用 `*` 查找当前单词，使用 `g*` 查找当前单词及包含当前单词的词或词组

## 替换

**:s 命令表示替换：**

常用操作：

* `:%s` / `替换值(或正则表达式)` / `目标值` / `如何替换`

* `%` 代表全局搜索，不加 `%` 即为行内搜索

* 如何替换：
    * g 全部替换不确认
    * gc 全部替换且替换前由用户确认

更详细的操作[详见此处](https://www.cnblogs.com/huxinga/p/7942194.html)

## 多文件编辑与窗口分割

### 多文件编辑

**作者的理解：对于每一个运行的vim，每打开一个文件就会创建一个buffer，打开多个文件即打开多个buffer**

* 打开一个新的文件(buffer)，只需使用 `:badd 文件名` 即可

* 管理当前打开的多个buffer，使用 `:ls` 即可查看当前vim中打开的而buffer列表， `%` 表示当前编辑中的buffer，注意每个buffer都有一个类似id的数字编号。

* 切换buffer:
    * 使用 `:b` + `buffer id` ，如 `b1` 表示切换到buffer id为1的buffer
    * 使用 `bn` 切换下一个buffer， `bp` 切换上一个buffer

* 退出一个buffer，直接切换至该buffer使用 `:q` 即可，或者使用 `:bd` + `buffer id`

### 窗口分割

* :sp 对当期窗口进行纵向分割，变为上下两个子窗口

* :vsp 对当前窗口进行横向分割，变为左右两个子窗口

* 窗口切换：
    * (ctrl + W) + w 切换下一个窗口
    * (ctrl + W) + hjkl 切换左下右上的窗口

* 可以在垂直或者水平的不同窗口打开不同的buffer

### tab 标签

**tab也适用于多文件编辑，但更确切的说tab应该属于多模块编辑**

**tab类似于浏览器的标签栏，每个tab包含一个独立的主窗口，每个tab下管理各自的buffer和子窗口**

* 使用 `:tabe 文件名` 创建一个新的tab

* 使用 `:tabs` 查看当前tabs的情况，可以查看各个tab以及它们所包含的窗口，其中 `>` 表示tab光标所在的窗口，tab page 后的编号表示tab的id

* 键入 `gt` 切换至下一个tab，使用 `tab id` + `gt`，切换到指定id的窗口

* 使用 `:tabc` 来关闭当前的tab

## 小技巧

* 使用ddp来交换行

* 在v模式下使用ctrl + v 来竖向选择，从而达到多行编辑的目的

* vaw来选中当前单词

* 在使用 `:` 输入命令后，若忘记命令或文件名，可使用 ctrl+d 来显示自动补全的项目

* 当不小心跳跃或丢失文档中的位置后可以通过 ctrl + o 来回溯上一个跳跃的光标位置，ctrl + i 则可以前进下一个光标位置。

* 在普通模式和v模式下，使用>>和<<来进行缩进和反缩进，在i模式下使用ctrl + t和ctrl + d来缩进和反缩进。


